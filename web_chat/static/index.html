<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AI Marketing Agency Chat</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    .chat-box { border: 1px solid #ccc; padding: 1em; height: 300px; overflow-y: scroll; margin-bottom: 1em; }
    .input-area { display: flex; gap: 0.5em; }
    .input-area input { flex: 1; padding: 0.5em; }
    .input-area button { padding: 0.5em 1em; }
    .message { margin-bottom: 0.5em; }
    .message.user { text-align: right; font-weight: bold; }
    .message.bot { text-align: left; }
    pre { background: #f5f5f5; padding: 0.5em; overflow-x: auto; }
  </style>
</head>
<body>
<h1>AI Marketing Agency Chat</h1>
<div class="chat-box" id="chatBox"></div>
<div class="input-area">
  <input type="text" id="clientName" placeholder="Nombre de la clínica (solo para equipos de cliente)" />
  <button onclick="runBase()">Ejecutar Equipo Base</button>
  <button onclick="runClient()">Ejecutar Equipo Cliente</button>
</div>
<script>
async function runBase() {
  addUserMessage("Ejecutar Equipo Base");
  const response = await fetch('/run_base', { method: 'POST' });
  const data = await response.json();
  addBotMessage(JSON.stringify(data, null, 2));
}
async function runClient() {
  const clientName = document.getElementById('clientName').value.trim();
  if (!clientName) {
    alert('Ingrese el nombre de la clínica');
    return;
  }
  addUserMessage("Ejecutar Equipo Cliente: " + clientName);
  const response = await fetch('/run_client', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ client_name: clientName })
  });
  const data = await response.json();
  addBotMessage(JSON.stringify(data, null, 2));
}
function addUserMessage(text) {
  const div = document.createElement('div');
  div.className = 'message user';
  div.textContent = text;
  document.getElementById('chatBox').appendChild(div);
  scrollChat();
}
function addBotMessage(text) {
  const pre = document.createElement('pre');
  pre.className = 'message bot';
  pre.textContent = text;
  document.getElementById('chatBox').appendChild(pre);
  scrollChat();
}
function scrollChat() {
  const chatBox = document.getElementById('chatBox');
  chatBox.scrollTop = chatBox.scrollHeight;
}
</script>
</body>
</html>
